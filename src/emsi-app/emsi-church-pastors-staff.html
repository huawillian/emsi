<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-image/iron-image.html">
<link rel="import" href="../../bower_components/paper-dialog/paper-dialog.html">
<link rel="import" href="../../bower_components/paper-dialog-scrollable/paper-dialog-scrollable.html">

<!-- custom elements -->
<link rel="import" href="emsi-button.html">
<link rel="import" href="emsi-firebase-document.html">

<dom-module id="emsi-church-pastors-staff">
	<template>
		<style>
			:host {
				display: block;
				margin: 0;
				padding: 0;
				margin-bottom: -4pt;
				width:50%;
				background-color: white;
			}

			@font-face {
			    font-family: MyriadProBold;
			    src: url(../fonts/MyriadPro-Bold.otf);
			}

			@font-face {
			    font-family: MyriadProRegular;
			    src: url(../fonts/MyriadPro-Regular.otf);
			}

			@font-face {
			    font-family: MyriadProSemibold;
			    src: url(../fonts/MyriadPro-Semibold.otf);
			}


			.container {
				width:100%;
				height: 50vw;
				background-color: rgba(133,120,116, 0.9);
			}

			.title {
				color: white;
				font-weight: 700;
				font-size: 25pt;
				font-family: MyriadProBold;
				letter-spacing: 0px;
				margin-bottom: 18pt;
			}

			.content {
				color: white;
				font-weight: 400;
				font-size: 15pt;
				line-height: 1.5;
				font-family: MyriadProRegular;
				margin-bottom: 0pt;
			}

			.stafftitle {
				font-family: MyriadProSemibold;
				font-size: 17pt;
				color: white;
			}

			.staffname {
				font-family: MyriadProRegular;
				font-size: 15pt;
				color: white;
				margin-bottom: 10pt;
			}

			.staffpic {
				width: 50pt;
				height: 50pt;
				right: -65%;
				border: 2px black;
				border-radius: 50%;
				top: -110pt;
				margin-bottom: -100pt;
				border: 3pt solid rgba(255,255,255,0.4);
			}

			.container > table {
				width:100%; 
				height:100%; 
				text-align: left; 
				padding: 15%;
			}

			@media screen and (max-width: 800px) {
				.container {
					height:100vw
				}

				:host {
					width: 100%;
				}
			}

			@media screen and (max-width: 1000px) and (min-width: 800px) {
				.container > table {
					padding: 10%;
				}

				.title {
					font-size: 30px;
					margin-bottom: 8pt;
				}

				.content {
					margin-bottom: 8pt;
					font-size: 13pt;
				}

				.staffname {
					font-size: 13pt;
				}

				.stafftitle {
					font-size: 15pt;
				}
			}


			@media screen and (max-width: 800px) and (min-width: 500px){
				.container > table {
					padding: 15%;
				}

				.title {
					font-size: 25pt;
					margin-bottom: 15pt;
				}

				.content {
					font-size: 15pt;
					margin-bottom: 15pt;
				}

				.staffname {
					font-size: 15pt;
				}

				.stafftitle {
					font-size: 17pt;
				}
			}

			@media screen and (max-width: 500px) {
				.container > table {
					padding: 7%;
				}

				.title {
					font-size: 30px;
					margin-bottom: 8pt;
				}

				.content {
					margin-bottom: 8pt;
					font-size: 13pt;
				}

				.staffname {
					font-size: 13pt;
				}

				.stafftitle {
					font-size: 15pt;
				}
			}

			paper-dialog {
				width: 80%;
				background-color: #857874;
			}

			emsi-button {
				margin-top: -10pt;
			}

		</style>
		
		<div class="container">
			<table> 
				<tbody valign="top">
					<tr>
	    				<td>
							<div class="title"> {{title}} </div>
							<template id='renderList' is="dom-repeat" items="[[displayedData]]">
								<div class="stafftitle">{{item.title}}</div>
								<div class="staffname">{{item.name}}</div>
								<iron-image class="staffpic" sizing="cover" preload src="{{item.url}}"></iron-image>
							</template>
							<template is="dom-if" if="{{hasHiddenStaff}}">
						      <emsi-button color="blue" on-tap="showMore"> 
						      	<emsi-firebase-document my-path="showMoreButton" lang="{{lang}}" display> </emsi-firebase-document>
						      </emsi-button>
						    </template>
						</td>
	    			</tr>
    			</tbody>
			</table>
		</div>

		<paper-dialog id="dialog" modal style="width: 80vw; padding: 20pt;">
		  <div style="color: #236192; font-size: 22pt; font-family: MyriadProBold;"> {{title}} </div>
		  <paper-dialog-scrollable>
			<div class="content" style="color: rgba(0,0,0,0.6); font-size: 12pt; line-height: 1.5; font-family: MyriadProRegular;">
				<template id='renderList' is="dom-repeat" items="[[data]]">
					<div class="stafftitle" style="font-family: MyriadProSemibold;
				font-size: 16pt;
				padding-left: 0%;
				padding-top: 20pt;
				color: rgba(0,0,0,0.6);">{{item.title}}</div>
					<div class="staffname" style="font-family: MyriadProRegular;
				font-size: 16pt;
				padding-left: 0%;
				color: rgba(0,0,0,0.6);">{{item.name}}</div>
					<iron-image class="staffpic" style="width: 50pt;
				height: 50pt;
				right: -65%;
				border: 2px black;
				border-radius: 50%;
				top: -110pt;
				margin-bottom: -100pt;
				border: 3pt solid rgba(0,0,0,0.4);" sizing="cover" preload src="{{item.url}}"></iron-image>
				</template>
			</div>
		  </paper-dialog-scrollable>
		  <div class="buttons">
		    <emsi-button color="blue" dialog-dismiss> CLOSE </emsi-button>
		  </div>
		</paper-dialog>

	</template>
	<script>
		Polymer({
			is: 'emsi-church-pastors-staff' ,

			properties: {
				lang: {
					type: String,
					value: "en"
				},
				title: String,
				data: {
					type: Array,
					value: [] ,
					observer: "dataChanged"
				} ,
				displayedData: {
					type: Array,
					value: []
				} ,
				hasHiddenStaff: {
					type: Boolean,
					value: false
				}
			} ,

			dataChanged: function(newValue, oldValue) {
				if(newValue.length > 3) {
					this.hasHiddenStaff = true;
				}

				this.set("displayedData", []);

				for(var i = 0; i < 3; i++) {
					if(newValue[i] == undefined) break;
					this.push("displayedData", newValue[i]);

				}

				console.log(this.displayedData);
			} ,

			showMore: function() {
				var body = document.querySelector('body');
			  	Polymer.dom(body).appendChild(this.$.dialog);
			  	this.$.dialog.open();
			}
		});
	</script>
</dom-module>