<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-menu/paper-menu.html">
<link rel="import" href="../../bower_components/paper-menu/paper-submenu.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">
<link rel="import" href="../../bower_components/iron-collapse/iron-collapse.html">
<link rel="import" href="../../bower_components/app-route/app-location.html">

<dom-module id="emsi-navbar-mobile">
	<template>
		<style>
			:host {
				display: block;
			}

			@font-face {
			    font-family: MyriadProSemiBold;
			    src: url(../fonts/MyriadPro-Semibold.otf);
			}

			#menu {
				width:100%;
				position: absolute;
				top: 60pt;
				left: 0;
				background-color: #857874;
				box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14),
			          0 1px 5px 0 rgba(0, 0, 0, 0.12),
			          0 3px 1px -2px rgba(0, 0, 0, 0.2);
			}

			.menu-content paper-item {
				padding-left: 60pt;
			}

			.menu-trigger {
				padding-left: 30pt;
			}

			paper-item {
				font-family: MyriadProSemiBold;
				color: white;
				font-size: 11pt;
			}

			paper-menu {
				background-color: #857874;
				padding: 0;
			}

			paper-item:hover {
				background-color: rgba(0,0,0,0.2);
			}

		</style>
	    <!-- app-location binds to the app's URL -->
	    <app-location route="{{route}}"></app-location>

		<iron-collapse id="collapse">
			<paper-menu id="menu">
				<paper-submenu>
					<paper-item class="menu-trigger" on-tap="changeRoute"> HOME </paper-item>
				</paper-submenu>
				<paper-submenu>
					<paper-item class="menu-trigger"> ABOUT US </paper-item>
					<paper-menu class="menu-content">
					  <paper-item on-tap="changeRoute"> Organization </paper-item>
					  <paper-item on-tap="changeRoute"> Beliefs </paper-item>
					  <paper-item on-tap="changeRoute"> Missions </paper-item>
					  <paper-item on-tap="changeRoute"> Seminary </paper-item>
					</paper-menu>
				</paper-submenu>
				<paper-submenu>
					<paper-item class="menu-trigger"> LOCATIONS </paper-item>
					<paper-menu class="menu-content">
					  <paper-item on-tap="changeRoute"> Search </paper-item>
					  <paper-item on-tap="changeRoute"> America </paper-item>
					  <paper-item on-tap="changeRoute"> Europe </paper-item>
					  <paper-item on-tap="changeRoute"> Asia </paper-item>
					  <paper-item on-tap="changeRoute"> Africa </paper-item>
					</paper-menu>
				</paper-submenu>
				<paper-submenu>
					<paper-item class="menu-trigger"> MISSIONS </paper-item>
					<paper-menu class="menu-content">
					  <paper-item on-tap="changeRouteToMissions"> Introduction </paper-item>
					  <paper-item on-tap="changeRoute"> Ministries </paper-item>
					  <paper-item on-tap="changeRoute"> Churches </paper-item>
					  <paper-item on-tap="changeRoute"> Activities </paper-item>
					</paper-menu>
				</paper-submenu>
				<paper-submenu>
					<paper-item class="menu-trigger"> SEMINARY </paper-item>
					<paper-menu class="menu-content">
					  <paper-item on-tap="changeRouteToSeminary"> Introduction </paper-item>
					  <paper-item on-tap="changeRoute"> Courses </paper-item>
					  <paper-item on-tap="changeRoute"> Curriculum </paper-item>
					</paper-menu>
				</paper-submenu>
			</paper-menu>
		</iron-collapse>

	</template>
	<script>
		Polymer({
			is: 'emsi-navbar-mobile' ,

			closeAllMenus: function(e) {
				var submenuArr = Polymer.dom(this.root).querySelectorAll("paper-submenu");
	        	for(var i = 0; i < submenuArr.length; i++) {
	        		submenuArr[i].close();
	        	}				
			} ,

			toggleMenu: function() {
			  this.$.collapse.toggle();
			} ,

			openSubMenu: function(e){
				var submenuObj = Polymer.dom(e).localTarget;
				submenuObj.open();
			} ,

			showMenu: function() {
			  this.$.collapse.show();
			} ,

			hideMenu: function() {
			  this.$.collapse.hide();
			  this.closeAllMenus();
			} ,

			changeRoute: function(e) {
				var text = Polymer.dom(e).localTarget.innerText;
				if(text == "Organization") {
					this.set('route.path', '/about');
				} else if(text == "Introduction") {
					// Do nothing
				} else {
					this.set('route.path', '/' + text.toLowerCase());
				}

				this.closeAllMenus();
				this.hideMenu();
			} ,

			changeRouteToMissions: function() {
				this.set('route.path', '/missions');
				this.closeAllMenus();
				this.hideMenu();
			} ,

			changeRouteToSeminary: function() {
				this.set('route.path', '/seminary');
				this.closeAllMenus();
				this.hideMenu();
			}
		});
	</script>
</dom-module>